<!DOCTYPE html>
<html lang="en">
  <%- include("../partials/head.ejs") %>
  <body>
    <div id="wrapper">
      <%- include("../partials/header.ejs") %> <%-
      include("../partials/navigation.ejs") %>

      <main>
        <h1><%= title %></h1>

        <!-- Mostrar mensaje flash si existe -->
        <% if (typeof message !== 'undefined') { %>
        <div class="flash-message"><%= message %></div>
        <% } %>

        <!-- Registration form -->
        <form action="/account/register" method="POST">
          <label for="first-name">First Name:</label>
          <input
            type="text"
            id="first-name"
            name="first-name"
            required
            data-trail="first-name"
          />

          <label for="last-name">Last Name:</label>
          <input
            type="text"
            id="last-name"
            name="last-name"
            required
            data-trail="last-name"
          />

          <label for="email">Email Address:</label>
          <input
            type="email"
            id="email"
            name="email"
            required
            data-trail="email"
          />

          <label for="password">Password:</label>
          <div class="password-wrapper">
            <input
              type="password"
              id="password"
              name="password"
              required
              data-trail="password"
              pattern="(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{12,})"
              title="Password must be at least 12 characters long and contain at least one uppercase letter, one number, and one special character."
            />
            <button
              type="button"
              id="toggle-password"
              aria-label="Toggle Password Visibility"
            >
              👁
            </button>
          </div>

          <button type="submit">Register</button>
        </form>

        <!-- Link to login -->
        <p>Already have an account? <a href="/account/login">Login Here</a></p>
      </main>

      <%- include("../partials/footer.ejs") %>

      <script>
        // Toggle Password Visibility
        const togglePasswordBtn = document.getElementById("toggle-password");
        const passwordInput = document.getElementById("password");

        togglePasswordBtn.addEventListener("click", () => {
          const type =
            passwordInput.getAttribute("type") === "password"
              ? "text"
              : "password";
          passwordInput.setAttribute("type", type);
          togglePasswordBtn.textContent = type === "password" ? "👁" : "🙈"; // Change the icon
        });
      </script>
    </div>
    <script src="/js/script.js"></script>
  </body>
</html>
